╔══════════════════════════════════════════════════════════════════╗
║              NOTEBOOK - COMPONENT ARCHITECTURE                   ║
╚══════════════════════════════════════════════════════════════════╝

SYSTEM OVERVIEW
═══════════════

┌─────────────────────────────────────────────────────────────────┐
│                         USER INTERFACE                          │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  main_window.c (GTK3)                                    │   │
│  │  - Menu bar (File, Edit, View, Help)                    │   │
│  │  - Text editor (GtkTextView)                            │   │
│  │  - Dialogs (File chooser, Confirm, Error)              │   │
│  └────────────────────┬────────────────────────────────────┘   │
└─────────────────────────┼──────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────────────┐
│                   APPLICATION CONTROLLER                         │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  application.c                                           │   │
│  │  - Coordinates all subsystems                           │   │
│  │  - Manages document lifecycle                           │   │
│  │  - Handles callbacks and events                         │   │
│  └──┬────────────────┬────────────────┬─────────────────┬──┘   │
└─────┼────────────────┼────────────────┼─────────────────┼──────┘
      │                │                │                 │
      ▼                ▼                ▼                 ▼
┌──────────┐  ┌──────────────┐  ┌──────────────┐  ┌─────────────┐
│ Document │  │ File Ops     │  │ Clipboard    │  │ Theme       │
│ (Model)  │  │ (I/O)        │  │ (Copy/Paste) │  │ (Styling)   │
└──────────┘  └──────────────┘  └──────────────┘  └─────────────┘

COMPONENT DETAILS
═════════════════

┌─ CORE DOMAIN ─────────────────────────────────────────────────┐
│                                                                │
│  document.c / document.h                                       │
│  ├─ Manages: Content, File path, Modified flag                │
│  ├─ Provides: get/set content, mark saved/modified            │
│  └─ Purpose: Single source of truth for document state        │
│                                                                │
└────────────────────────────────────────────────────────────────┘

┌─ INFRASTRUCTURE LAYER ────────────────────────────────────────┐
│                                                                │
│  file_operations.c / file_operations.h                         │
│  ├─ Handles: Read/Write files                                 │
│  ├─ Features: Error codes, Permission checks                  │
│  └─ Purpose: File system abstraction                          │
│                                                                │
│  clipboard_operations.c / clipboard_operations.h               │
│  ├─ Handles: Copy/Paste operations                            │
│  ├─ Features: Text buffer management                          │
│  └─ Purpose: Clipboard abstraction                            │
│                                                                │
│  theme_manager.c / theme_manager.h                             │
│  ├─ Manages: Dark/Light themes                                │
│  ├─ Provides: CSS generation, Theme switching                 │
│  └─ Purpose: Visual theme management                          │
│                                                                │
└────────────────────────────────────────────────────────────────┘

┌─ APPLICATION LAYER ───────────────────────────────────────────┐
│                                                                │
│  application.c / application.h                                 │
│  ├─ Coordinates: All subsystems                               │
│  ├─ Implements: Business workflows                            │
│  ├─ Manages: Resource lifecycle                               │
│  └─ Purpose: Central controller/facade                        │
│                                                                │
└────────────────────────────────────────────────────────────────┘

┌─ UI LAYER ────────────────────────────────────────────────────┐
│                                                                │
│  main_window.c / main_window.h                                 │
│  ├─ Creates: GTK widgets and menus                            │
│  ├─ Handles: User interactions                                │
│  ├─ Updates: UI based on application state                    │
│  └─ Purpose: Presentation and user interaction                │
│                                                                │
└────────────────────────────────────────────────────────────────┘

DATA FLOW EXAMPLE: Opening a File
═════════════════════════════════

User clicks "Open"
        │
        ▼
main_window: Shows file chooser dialog
        │
        ▼
User selects file → main_window gets path
        │
        ▼
main_window → application_open_document(path)
        │
        ▼
application → file_operations_read(path, doc)
        │
        ▼
file_operations: Reads file, updates document
        │
        ▼
document: Stores content, marks as saved
        │
        ▼
application → Callback: on_document_loaded()
        │
        ▼
main_window: Updates text view and title
        │
        ▼
User sees file content in editor ✓

KEY DESIGN PRINCIPLES
═════════════════════

✓ Single Responsibility - Each module has one job
✓ Open/Closed - Extensible without modification
✓ Liskov Substitution - Interface-based design
✓ Interface Segregation - Focused interfaces
✓ Dependency Inversion - Depend on abstractions

PATTERNS USED
═════════════

→ MVC (Model-View-Controller)
→ Observer (Callbacks for events)
→ Facade (Application layer)
→ Strategy (Theme switching)
→ Dependency Injection (Constructor injection)
